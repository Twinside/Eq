<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
<!-- %INCLUDE% common.html -->
        <title>Eq - as a preprocessor</title>
    </head>
    <body>
        <div class="whole">
            <h2>Eq as a preprocessor</h2>

            <div class="section">
                <h3><a name="whypreprocessor">Why do you want a preprocessor?</a></h3>
                <p>
                    Yes, I can hear you, but yes, you need a preprocessor for 
                    some equations. For a better documentation, you can inline
                    a nice ASCII art equation, and for some formula manipulation,
                    you can directly process it within your source code.
                </p>
            </div>
            <div class="section">
                <h3><a name="preprocformat">Let's format!</a></h3>
<!-- %% cat ../tests/preprocess/test.c -->
<!-- %%%cpp -->
                <p>
                    Pretty isn't it? As a disgression, I would like to mention
                    that camembert refer to <img src="img/camembert.jpg" width="50%">. Why is it there?
                    well, I don't know. Maybe eq can produce it. Or not.
                </p>
                <p>
                    let's get real and preprocess it.
                </p>
<!-- %% eq preprocess -o temp.c -f ../tests/preprocess/formattest.c -->
<!-- %% cat temp.c -->
<!-- %%%cpp -->
            </div>
            <div class="section">
                <h3><a name="howpreprocessor">How to embed preprocessor in your language?</a></h3>
                <p>
                    The little embedded markup format is really simple. To use it, you
                    must write it in <strong>mono line</strong> comment. Let's digg a bit
                    in the definition which trigger the processing :
                </p>
                <table>
                    <tr>
                        <td><code>Eq:</code></td>
                        <td>Tell Eq that he can process something</td>
                    </tr>
                    <tr>
                        <td><code>format</code></td>
                        <td>The eq command to call, you are limited here, you don't have
                            all the command at disposition.
                        </td>
                    </tr>
                    <tr>
                        <td><code>&lt;@&lt;</code></td>
                        <td>Begin marker of output</td>
                    </tr>
                    <tr>
                        <td><code>&gt;@&gt;</code></td>
                        <td>End marker of output</td>
                    </tr>
                </table>
                <p>
                    The <code>&lt;@&lt;</code> and <code>&gt;@&gt;</code> are ugly, but
                    they permit the preprocessor to re-analyze the file and update
                    the previous render, if someone got a better idea, please send
                    me a mail about it.
                </p>
            </div>
        </div>
    </body>
</html>

